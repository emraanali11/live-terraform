version: 3
automerge: false
parallel_apply: false
parallel_plan: false
projects:
- autoplan:
    enabled: true
    when_modified:
    - '*.hcl'
    - '*.tf*'
  dir: ./ec2
  workflow: terragrunt
workflows:
  terragrunt:
    plan:
      steps:
      - run: /usr/local/bin/terragrunt plan -no-color -out $PLANFILE
    apply:
      steps:
      - run: /usr/local/bin/terragrunt apply -no-color $PLANFILE
